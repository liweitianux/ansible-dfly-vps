---
- name: rc.conf - tune basic services
  blockinfile:
    path: /etc/rc.conf
    marker: "# {mark} ANSIBLE MANAGED - basic"
    block: |
      nfs_reserved_port_only="YES"
      nfs_client_enable="NO"
      rpc_umntall_enable="NO"
      mixer_enable="NO"
      blanktime="NO"

- name: loader.conf - tune some variables
  blockinfile:
    path: /boot/loader.conf
    marker: "# {mark} ANSIBLE MANAGED - basic"
    block: |
      vm.dma_reserved=16m
      hw.x2apic_enable=1
      hint.xhci.0.disabled=1
      hint.ehci.0.disabled=1
      hint.ahci.disabled=1

- name: syslog - enable console log file (1/2)
  lineinfile:
    path: /etc/syslog.conf
    regexp: '^#?\s*console.info'
    line: "console.info	/var/log/console.log"

- name: syslog - enable console log file (2/2)
  file:
    path: /var/log/console.log
    state: touch
    mode: 0600

- name: pkg - disable repo auto update
  lineinfile:
    path: /usr/local/etc/pkg.conf
    regexp: '^#?REPO_AUTOUPDATE'
    line: "REPO_AUTOUPDATE = false;"

- name: pkg - update repos
  command: pkg update

- name: pkg - install packages
  pkgng:
    name: "{{ item }}"
    state: present
  with_items:
    - tmux
    - vim-lite
    - mosh
    - rsync
    - htop

- name: vim - add basic configurations
  blockinfile:
    path: /usr/local/etc/vim/vimrc
    marker: '" {mark} ANSIBLE MANAGED - basic'
    block: |
      set background=dark
      colorscheme desert

